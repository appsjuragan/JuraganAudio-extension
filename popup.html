<link rel="stylesheet" type="text/css" href="popup.css" />
<script src="snap.svg-min.js"></script>

<script type="module" src="modules/main.js"></script>

<body>
  <!-- Radio Inputs for Tabs - Must be first for sibling selectors -->
  <input id="tab-1" type="radio" name="tab-group" checked="checked" />
  <input id="tab-2" type="radio" name="tab-group" />
  <input id="tab-3" type="radio" name="tab-group" />

  <div id="bottomControls">
    <div class="dashboard-grid">
      <!-- Left: Power & Reset -->
      <div class="dash-section power-section">
        <button id="eqTabButton" class="power-btn" title="Toggle EQ for this tab">
          <span class="power-icon">‚èª</span> EQ
        </button>
        <button id="resetFiltersButton" title="Reset all filters to flat">Reset</button>
      </div>

      <!-- Center: Preset Management -->
      <div class="dash-section preset-section">
        <select id="presetSelect" title="Select a preset">
          <option value="" disabled selected>Select preset</option>
        </select>
        <div class="preset-input-group">
          <input id="presetNameInput" type="text" placeholder="Preset Name" />
          <button id="savePresetButton" title="Save Preset">+</button>
          <button id="deletePresetButton" title="Delete Preset">-</button>
        </div>
      </div>

      <!-- Right: Settings & I/O -->
      <div class="dash-section settings-section">
        <div class="settings-row">
          <select id="qualityModeSelect" title="Audio quality mode">
            <option value="efficient">Efficient</option>
            <option value="quality">Quality</option>
            <option value="hifi">Hi-Fi</option>
          </select>
          <button id="vizButton" title="Toggle Spectrum Visualizer">Visualizer</button>
        </div>
        <div class="io-row">
          <button id="exportPresetsButton" title="Export Presets">Exp</button>
          <button id="importPresetsButton" title="Import Presets">Imp</button>
        </div>
      </div>
    </div>

    <!-- Hidden elements -->
    <div style="display:none;">
      <span id="userPresetSpan"></span>
      <button id="bassBoostButton">Bass Boost</button>
      <input type="file" id="importPresetsFile" />
    </div>
  </div>

  <h1>
    <span>Ears Audio Toolkit</span>
    <div id="tabNav">
      <label id="label-1" for="tab-1">Controls</label>
      <label for="tab-2">Guide</label>
      <label for="tab-3">Active Tabs</label>
    </div>
  </h1>

  <div id="mainDiv">
    <!-- Inputs moved to body top -->

    <span id="limiterIndicator">LIM</span>
    <span id="sbrIndicator" title="Spectral Band Replication active - restoring high frequencies">SBR</span>
    <div id="eqDiv">
      <svg id="gainSvg" width="30" height="300"></svg>
      <svg id="eqSvg" width="600" height="300"></svg>
      <div id="eqOptionsDiv">
      </div>
    </div>
    <div id="guideDiv">
      <p>
        When you click the Ears icon, the current tab is added to Ears. To add
        another tab, open that tab, then click the Ears icon again.
      </p>
      <h3>EQ</h3>
      <p>
        The movable dots each represent a filter used to equalize (or EQ) the
        audio. Filters allow you to boost or lower certain frequencies (i.e.
        just part of the treble or bass). The purple dots act as shelf filters
        while the blue dots act as notch filters.
      </p>
      <p>
        Moving a dot left or right selects lower or higher frequencies, while
        moving a dot up or down increases the volume of those
        frequencies. Shift-dragging a filter up and down will widen or narrow
        the filter, also called changing its Q value.
      </p>

      <p>
        The frequency spectrum visualizer shows you what you are listening to
        and how your EQ has changed it. Lower sounds appear to the left and
        higher to the right (with volume indicated by the height of a peak).
        <a href="https://www.youtube.com/watch?v=VMnkYTan5pY" rel="noreferrer
			noopener" target="_blank">Watch the demo</a>.
      </p>

      <p>
        For more information about how to use filters, check out
        <a href="https://music.tutsplus.com/tutorials/how-to-use-a-parametric-equalizer--audio-2301"
          rel="noopener noreferrer" target="_blank">this guide</a>.
      </p>
      <h3>Presets</h3>
      <p>
        To save a configuration of filters for later, type a name in the text
        box below, then click 'Save Preset' or press ENTER. The save and delete
        buttons operate on whichever preset's name is selected in the text box.
      </p>
    </div>
    <div id="tabsDiv">
      <div id="eqTabList"></div>
    </div>
  </div>

  <a id="fullscreen-link" target="_blank" href="chrome-extension://nfdfiepdkbnoanddpianalelglmfooik/popup.html">Open in
    Full Window</a>
  <div id="toast"></div>
</body>